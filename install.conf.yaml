- defaults:
    link:
        relink: true
        create: true

- shell:
    - [git submodule update --init --recursive, Installing submodules]
    - [./vim/h2cppx-postinstall.sh, Installing h2cppx dependancies]
    - [./vim/ycm-compile.sh, Installing YouCompleteMe]
    - [mkdir -p --mode=700 ~/.gnupg, Creating gpg dir with right permissions]

- clean: ['~']

- link:
    ~/.dotfiles: ''
    ~/.shellrc: shellrc
    ~/.zshrc: zshrc
    ~/.zsh: zsh
    ~/.vim: vim
    ~/.vimrc: vim/init.vim
    ~/.config/nvim: vim
    ~/.gnupg/gpg.conf: gnupg/gpg.conf
    ~/.gnupg/gpg-agent.conf: gnupg/gpg-agent.conf
    ~/.i3/config: i3/config
    ~/.i3/lock.sh: i3/lock.sh
    ~/.i3/status.py: i3/status.py
    ~/.i3/i3-sensible-terminal: i3/i3-sensible-terminal
    ~/.Xdefaults: Xdefaults
    ~/.signature: signature
    ~/.gitconfig: gitconfig
    ~/.dir_colors: dir_colors
    ~/.compton.conf: compton.conf
    ~/.config/termite/config: termiterc
    ~/.bashrc: bashrc
    ~/.shell: shell
    ~/.config/pulse/default.pa: pulse/default.pa
    ~/.bin: bin
    ~/.pip/pip.conf: pip.conf
    ~/.mutt: mutt
    ~/.muttrc: muttrc
    ~/.msmtprc: msmtprc
    ~/.mbsyncrc: mbsyncrc

- shell:
    - [touch ~/.customrc, Creating curstomrc]
    -
        command: zsh ./dependancies-check.zsh
        description: Checking dependancies
        stderr: true
    - [vim -c GoInstallBinaries -c q, Installing vim-go dependancies]
    -
        command: gpg -o ~/.config/pulse/cookie --decrypt ./pulse/pulse-cookie.asc
        description: Installing pulse cookie
        stderr: true
